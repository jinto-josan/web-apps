meta {
  name: exchange
  type: http
  seq: 1
}

post {
  url: {{BASE_URI}}/exchange
  body: json
  auth: inherit
}

body:json {
  {
    "idToken": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6InlFVXdtWFdMMTA3Q2MtN1FaMldTYmVPYjNzUSIsImtpZCI6InlFVXdtWFdMMTA3Q2MtN1FaMldTYmVPYjNzUSJ9.eyJhdWQiOiJhcGk6Ly81YjNlZjY1Yi05YzI5LTQ3YTktOGQ1Yi1mMjAzMmVlM2U4ZTciLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC8yOWUzN2I4Ni1iNTNlLTRiYzEtOGJmNS05MGY0YTA1MjA0YjIvIiwiaWF0IjoxNzYyNDExMzU5LCJuYmYiOjE3NjI0MTEzNTksImV4cCI6MTc2MjQxNjkzOSwiYWNyIjoiMSIsImFpbyI6IkFZUUFlLzhhQUFBQVRoSEhOUUZSd1l5V2ZPeE0yclFxT1FaUjdFWGF2TkxNV0lyeW42cFZZK1pxVEZqemVwUzRwR0MrQTlaOWJuSEg0SXA3SE1rdlVVaVVTMXBuUW50RHFBZEVmRjNqVHBURlkzNUZjRmppTkFNcDFrdTJoNjhHRHVUZENkVlQvRkhIY0VxTm5VamZuM3NxRlJld2JmUTA5bUpKYmF3MkJXWE5UNW1RdGZ5VGFQdz0iLCJhbXIiOlsicHdkIiwibWZhIl0sImFwcGlkIjoiMDRiMDc3OTUtOGRkYi00NjFhLWJiZWUtMDJmOWUxYmY3YjQ2IiwiYXBwaWRhY3IiOiIwIiwiZW1haWwiOiJtb3lhbGFuamludG8uam9zYW5AdGhvdWdodHdvcmtzLmNvbSIsImlkcCI6Imh0dHBzOi8vc3RzLndpbmRvd3MubmV0LzZmZWNkMDY1LWNiMzEtNDFiNC05ODVjLTYwZjJmZGYxNzIwZi8iLCJpcGFkZHIiOiIxNC4xNDMuMjkuNzQiLCJuYW1lIjoiTW95YWxhbiBKaW50byBKb3NhbiIsIm9pZCI6IjYwNTAzNjc4LTU2NDAtNGNmNS1hOTM2LTA3ZjgyMjMwOWYxYiIsInJoIjoiMS5BY1lBaG52aktUNjF3VXVMOVpEMG9GSUVzbHYyUGxzcG5LbEhqVnZ5QXk3ajZPZUlBZjdHQUEuIiwic2NwIjoidXNlcl9hY2Nlc3MiLCJzaWQiOiIwMGE4N2NlOS1lZWI1LTZiOGItYWFlZi1iMDY2NjFkZGZhYTciLCJzdWIiOiJQMHJ0RU13a3gtWmJJQk4tRjVpeFBtNEVxaXNISlM1MGpXeFk3V1NmSWcwIiwidGlkIjoiMjllMzdiODYtYjUzZS00YmMxLThiZjUtOTBmNGEwNTIwNGIyIiwidW5pcXVlX25hbWUiOiJtb3lhbGFuamludG8uam9zYW5AdGhvdWdodHdvcmtzLmNvbSIsInV0aSI6IlJqUW1WRE5JeEU2Q2NJc2VvTDFQQUEiLCJ2ZXIiOiIxLjAiLCJ4bXNfZnRkIjoidi1tNUxkN3VjakhFQ2lPalloQ0ZjdVJ0MGFOa09qbEhJZEVQNEwwMFE2QUJhMjl5WldGemIzVjBhQzFrYzIxeiJ9.CAM4it3GSLoGpMDqqFe0kurNjAETYZ5sG_NEsG-OvW1lqlusQjF8-oABog4D0rh12IXUIXj5kEE5EHQHBxhOUd4opAPU67Y2zRxEbD7sVFivQSL98Taa7jWskBbWfCMqv6-ZHtsj1jyzbzqYMGECNPk5H-UV6CzMDoOjxq9jXWPALSidxeNIm8hb7yr6RZ9yoSieiHZbpj2zZOVaODM3t9k1cgdG5dRPJjwwXZbWXa8X5e5QV_M-wRS2gSemSk0uCDUS4CiDHLfjZua6OZCzGRdxxLxdsKwheFqV9D3Om6hSyA5hNYqNcHWYMGO7l5Yh9qfS7QVTI_tCRoTcajwcfQ"
  }
}

script:post-response {
  bru.setVar("accessToken", res("accessToken"));
  bru.setVar("refreshToken", res("refreshToken"));
}

settings {
  encodeUrl: true
  timeout: 0
}
