@startuml Create SLO Flow
participant "User" as User
participant "SLOController" as Controller
participant "SLOApplicationService" as Service
participant "SLOMapper" as Mapper
participant "SLORepository" as Repo
participant "SLOCalculator" as Calculator
participant "AzureMonitorQueryPort" as Monitor

User -> Controller: POST /api/v1/slo\nCreateSLORequest
Controller -> Service: createSLO(request)

Service -> Mapper: toDomain(request)
Mapper --> Service: SLO (domain)

Service -> Service: Set id, timestamps
Service -> Service: Calculate error budget

Service -> Repo: save(slo)
Repo --> Service: Saved SLO

Service -> Monitor: calculateSLI() for each SLI
Monitor --> Service: SLI values

Service -> Calculator: calculateSLO(slo, slis)
Calculator --> Service: currentSLO

Service -> Mapper: toResponse(slo, currentSLO, burnRate)
Mapper --> Service: SLOResponse

Service --> Controller: SLOResponse
Controller --> User: 201 Created
@enduml

